{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/components/CreateItem.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n                                fragment NewItem on Item {\\n                                    id\\n                                    type\\n                                }\\n                            \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    mutation CREATE_ITEM_MUTATION(\\n        $title: String!\\n        $description: String!\\n        $price: Int!\\n        $image: String\\n        $largeImage: String\\n    ) {\\n        createItem(data: {\\n            title: $title\\n            description: $description\\n            price: $price\\n            image: $image\\n            largeImage: $largeImage\\n        }) {\\n            id\\n            title\\n        }\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { gql, useMutation } from '@apollo/client';\nimport { useRouter } from 'next/router';\nimport Form from './styles/Form';\nimport ErrorMessage from './ErrorMessage';\nimport useForm from '../lib/useForm';\nvar CREATE_ITEM_MUTATION = gql(_templateObject());\n\nvar CreateItem = function CreateItem() {\n  _s();\n\n  var router = useRouter();\n\n  var _useForm = useForm({\n    title: \"\",\n    description: \"\",\n    image: \"\",\n    largeImage: \"\",\n    price: 0\n  }),\n      inputs = _useForm.inputs,\n      handleChange = _useForm.handleChange;\n\n  var _useMutation = useMutation(CREATE_ITEM_MUTATION, {\n    update: function update(cache, _ref) {\n      var createItem = _ref.data.createItem;\n      cache.modify({\n        fields: {\n          getAllItems: function getAllItems() {\n            var existingItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n            var newItem = cache.writeFragment({\n              data: createItem,\n              fragment: gql(_templateObject2())\n            });\n            return [newItem].concat(_toConsumableArray(existingItems));\n          },\n          itemsCount: function itemsCount(presentCount) {\n            return presentCount + 1;\n          }\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createItem = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      error = _useMutation2$.error,\n      loading = _useMutation2$.loading;\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return createItem({\n                  variables: inputs\n                });\n\n              case 3:\n                res = _context.sent;\n                router.push({\n                  pathname: '/item/[id]',\n                  query: {\n                    id: res.data.createItem.id\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    children: [/*#__PURE__*/_jsxDEV(ErrorMessage, {\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: loading,\n      \"aria-busy\": loading,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"file\",\n        children: [\"Image\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"image\",\n          name: \"image\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, _this), inputs.image && /*#__PURE__*/_jsxDEV(\"img\", {\n        width: \"200\",\n        src: inputs.image,\n        alt: \"Upload Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 39\n      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        children: [\"Title\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          name: \"title\",\n          placeholder: \"title\",\n          required: true,\n          value: inputs.title,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"price\",\n        children: [\"Price\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"price\",\n          name: \"price\",\n          placeholder: \"price\",\n          required: true,\n          value: inputs.price,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"description\",\n        children: [\"description\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"description\",\n          name: \"description\",\n          placeholder: \"Enter A Description\",\n          required: true,\n          value: inputs.description,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(CreateItem, \"m9cZyMc/LGs4daL9FSH0NgWWcFY=\", false, function () {\n  return [useRouter, useForm, useMutation];\n});\n\n_c = CreateItem;\nexport default CreateItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateItem\");","map":{"version":3,"sources":["/Users/olakunleyusuf/Desktop/Kunle Kodes/Node Server/Advanced-React/finalfit/components/CreateItem.js"],"names":["gql","useMutation","useRouter","Form","ErrorMessage","useForm","CREATE_ITEM_MUTATION","CreateItem","router","title","description","image","largeImage","price","inputs","handleChange","update","cache","createItem","data","modify","fields","getAllItems","existingItems","newItem","writeFragment","fragment","itemsCount","presentCount","error","loading","e","preventDefault","variables","res","push","pathname","query","id"],"mappings":"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","sourcesContent":["import { gql, useMutation } from '@apollo/client';\nimport { useRouter } from 'next/router';\nimport Form from './styles/Form';\nimport ErrorMessage from './ErrorMessage';\nimport useForm from '../lib/useForm';\n\nconst CREATE_ITEM_MUTATION = gql`\n    mutation CREATE_ITEM_MUTATION(\n        $title: String!\n        $description: String!\n        $price: Int!\n        $image: String\n        $largeImage: String\n    ) {\n        createItem(data: {\n            title: $title\n            description: $description\n            price: $price\n            image: $image\n            largeImage: $largeImage\n        }) {\n            id\n            title\n        }\n    }\n`;\n\nconst CreateItem = () => {\n\n    const router = useRouter();\n    const {inputs, handleChange} = useForm({\n        title: \"\",\n        description: \"\",\n        image: \"\",\n        largeImage: \"\",\n        price: 0\n    })\n\n    const [ createItem, { error, loading } ] = useMutation(CREATE_ITEM_MUTATION, {\n        update(cache, { data: { createItem }}) {\n            cache.modify({\n                fields: {\n                    getAllItems(existingItems = []) {\n                        const newItem = cache.writeFragment({\n                            data: createItem,\n                            fragment: gql`\n                                fragment NewItem on Item {\n                                    id\n                                    type\n                                }\n                            `\n                        });\n                        return [newItem, ...existingItems];\n                    },\n                    itemsCount(presentCount) {\n                        return presentCount + 1\n                    }\n                }\n            });\n        }\n    });\n\n    return (\n        <Form onSubmit={ async e => {\n            e.preventDefault();\n            let res = await createItem({ variables: inputs });\n            router.push({\n                pathname: '/item/[id]',\n                query: { id: res.data.createItem.id }\n            })\n        }} >\n            <ErrorMessage error={ error } />\n            <fieldset disabled={loading} aria-busy={loading} >\n                <label htmlFor=\"file\">\n                    Image\n                    <input \n                        type=\"file\" \n                        id=\"image\" \n                        name=\"image\" \n                        required\n                        onChange= { handleChange }\n                    />\n                </label>\n                    { inputs.image && <img width=\"200\" src={inputs.image} alt=\"Upload Preview\" /> }\n                <label htmlFor=\"title\">\n                    Title\n                    <input \n                        type=\"text\" \n                        id=\"title\" \n                        name=\"title\" \n                        placeholder=\"title\" \n                        required\n                        value={ inputs.title }\n                        onChange= { handleChange }\n                    />\n                </label>\n                <label htmlFor=\"price\">\n                    Price\n                    <input \n                        type=\"number\" \n                        id=\"price\" \n                        name=\"price\" \n                        placeholder=\"price\" \n                        required\n                        value={ inputs.price }\n                        onChange= { handleChange }\n                    />\n                </label>\n                <label htmlFor=\"description\">\n                    description\n                    <textarea\n                        id=\"description\" \n                        name=\"description\" \n                        placeholder=\"Enter A Description\" \n                        required\n                        value={ inputs.description }\n                        onChange= { handleChange }\n                    />\n                </label>\n                <button type=\"submit\">Submit</button>\n            </fieldset>\n        </Form>\n    );\n};\n\nexport default CreateItem;"]},"metadata":{},"sourceType":"module"}